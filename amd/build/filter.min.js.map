{"version":3,"sources":["../src/filter.js"],"names":["globalComponentsSelectorRowsCache","Map","globalLanguageSelectorOptionsCache","init","populateDOMElementCaches","registerEventListeners","updateCounterOfSelectedComponents","updateCounterOfSelectedLanguages","showUsedAdvancedOptions","scrollToFirstSelectedComponent","document","getElementById","querySelectorAll","forEach","row","index","rowLabel","querySelector","mapKey","innerText","toString","toLowerCase","set","root","fcmp","componentSearch","languageSearch","fver","flast","addEventListener","e","target","hasAttribute","action","getAttribute","region","closest","handleComponentSelectorAction","toggleMoreOptions","preventDefault","blur","value","submitFilter","id","startsWith","checked","setAttribute","removeAttribute","PubSub","subscribe","TranslatorEvents","pagechange","page","inputField","keyCode","stopPropagation","handleComponentSearch","handleLanguageSearch","item","type","selectedcomponent","needle","replace","shadowTableBody","createElement","key","appendChild","indexOf","fcmpItemTable","innerHTML","counter","invalidfeedback","count","length","classList","add","remove","textContent","text","flng","control","forceshow","tagName","selected","option","comp","scrollIntoView","loadingIndicator","form","formdata","FormData","delete","publish","FilterEvents","submit","URLSearchParams"],"mappings":"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","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * JS module for the AMOS translator filter.\n *\n * @module      local_amos/filter\n * @package     local_amos\n * @copyright   2020 David Mudrák <david@moodle.com>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {debounce} from 'core/utils';\nimport {get_string as getString} from 'core/str';\nimport * as PubSub from 'core/pubsub';\nimport FilterEvents from './filter_events';\nimport TranslatorEvents from './translator_events';\n\nlet globalComponentsSelectorRowsCache = new Map();\nlet globalLanguageSelectorOptionsCache = [];\n\n/**\n * Initialise the module and register events handlers.\n *\n * @function init\n */\nexport const init = () => {\n    populateDOMElementCaches();\n    registerEventListeners();\n    updateCounterOfSelectedComponents();\n    updateCounterOfSelectedLanguages();\n    showUsedAdvancedOptions();\n    scrollToFirstSelectedComponent();\n};\n\n/**\n * @function populateDOMElementCaches\n */\nconst populateDOMElementCaches = () => {\n\n    // Create a cache map of all rendered component rows, keyed by the lowercase component name.\n    document.getElementById('amosfilter_fcmp_items_table').querySelectorAll(':scope tr').forEach((row, index) => {\n        let rowLabel = row.querySelector('label[for^=\"amosfilter_fcmp_f_\"]');\n        let mapKey = 'HEADING_' + index;\n\n        if (rowLabel) {\n            mapKey = rowLabel.innerText.toString().toLowerCase();\n        }\n\n        globalComponentsSelectorRowsCache.set(mapKey, row);\n    });\n\n    globalLanguageSelectorOptionsCache = document.getElementById('amosfilter_flng').querySelectorAll(':scope option');\n};\n\n/**\n * @function registerEventListeners\n * @param {Element} root\n */\nconst registerEventListeners = () => {\n    let root = document.getElementById('amosfilter');\n    let fcmp = document.getElementById('amosfilter_fcmp');\n    let componentSearch = document.getElementById('amosfilter_fcmp_search');\n    let languageSearch = document.getElementById('amosfilter_flng_search');\n    let fver = document.getElementById('amosfilter_fver');\n    let flast = document.getElementById('amosfilter_flast');\n\n    // Click event delegation.\n    root.addEventListener('click', e => {\n        if (!e.target.hasAttribute('data-action')) {\n            return;\n        }\n\n        let action = e.target.getAttribute('data-action');\n        let region = e.target.closest('[data-region]').getAttribute('data-region');\n\n        if (region == 'amosfilter_fcmp') {\n            handleComponentSelectorAction(e, fcmp, action);\n        }\n\n        if (region == 'amosfilter_buttons' && action == 'togglemoreoptions') {\n            toggleMoreOptions(e, root);\n        }\n\n        if (region == 'amosfilter_buttons' && action == 'submit') {\n            e.preventDefault();\n            e.target.blur();\n            document.getElementById('amosfilter_fpg').value = 1;\n            submitFilter();\n        }\n    });\n\n    // Input change event delegation.\n    root.addEventListener('change', e => {\n        if (e.target.id.startsWith('amosfilter_fcmp_')) {\n            updateCounterOfSelectedComponents();\n        }\n\n        if (e.target.id == 'amosfilter_flng') {\n            updateCounterOfSelectedLanguages();\n        }\n\n        if (e.target.id == 'amosfilter_flast') {\n            if (flast.checked) {\n                fver.setAttribute('disabled', 'disabled');\n            } else {\n                fver.removeAttribute('disabled');\n            }\n        }\n    });\n\n    // Pagination clicks.\n    PubSub.subscribe(TranslatorEvents.pagechange, page => {\n        document.getElementById('amosfilter_fpg').value = page;\n        submitFilter();\n    });\n\n    // Prevent form submission on pressing Enter in the component search and language input.\n    [componentSearch, languageSearch].forEach(inputField => {\n        inputField.addEventListener('keypress', e => {\n            if (e.keyCode == 13) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        });\n    });\n\n    // Handle component search.\n    componentSearch.addEventListener('input', debounce(() => {\n        handleComponentSearch(componentSearch);\n    }, 200));\n\n    // Handle language search.\n    languageSearch.addEventListener('input', debounce(() => {\n        handleLanguageSearch(languageSearch);\n    }, 200));\n};\n\n/**\n * @function handleComponentSelectorAction\n * @param {Event} e\n * @param {Element} fcmp\n * @param {string} action\n */\nconst handleComponentSelectorAction = (e, fcmp, action) => {\n\n    let selectorComponentItem = `:scope [data-region=\"amosfilter_fcmp_item\"]:not(.hidden) input[name=\"fcmp[]\"]`;\n    document.getElementById('amosfilter_fapp').checked = false;\n    document.getElementById('amosfilter_fworkplace').checked = false;\n\n    if (action == 'selectstandard') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            var type = item.getAttribute('data-component-type');\n            item.checked = type == 'core' || type == 'standard';\n        });\n    }\n\n    if (action == 'selectworkplace' || action == 'selectapp') {\n        e.preventDefault();\n        let selectedcomponent = '';\n\n        switch (action) {\n            case 'selectworkplace':\n                selectedcomponent = 'workplace';\n                break;\n            case 'selectapp':\n                selectedcomponent = 'app';\n                break;\n        }\n\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            item.checked = item.hasAttribute('data-component-' + selectedcomponent);\n        });\n\n        document.getElementById('amosfilter_f' + selectedcomponent).checked = true;\n        showUsedAdvancedOptions();\n    }\n\n    if (action == 'selectall') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            item.checked = true;\n        });\n    }\n\n    if (action == 'selectnone') {\n        e.preventDefault();\n        fcmp.querySelectorAll(`${selectorComponentItem}`).forEach(item => {\n            item.checked = false;\n        });\n    }\n\n    updateCounterOfSelectedComponents();\n};\n\n/**\n * @function handleComponentSearch\n * @param {Element} inputField\n * @param {Array} fcmpItems\n */\nconst handleComponentSearch = (inputField) => {\n\n    let needle = inputField.value.toString().replace(/^ +| +$/, '').toLowerCase();\n    let shadowTableBody = document.createElement('tbody');\n\n    globalComponentsSelectorRowsCache.forEach((row, key) => {\n        if (key.startsWith('HEADING')) {\n            shadowTableBody.appendChild(row);\n            return;\n        }\n\n        if (needle == '' || key.indexOf(needle) !== -1) {\n            shadowTableBody.appendChild(row);\n            return;\n        }\n    });\n\n    let fcmpItemTable = document.getElementById('amosfilter_fcmp_items_table');\n    fcmpItemTable.innerHTML = '';\n    fcmpItemTable.appendChild(shadowTableBody);\n};\n\n/**\n * @function updateCounterOfSelectedComponents\n */\nconst updateCounterOfSelectedComponents = () => {\n    let fcmp = document.getElementById('amosfilter_fcmp');\n    let counter = document.getElementById('amosfilter_fcmp_counter');\n    let invalidfeedback = document.getElementById('amosfilter_fcmp_invalid_feedback');\n    let count = fcmp.querySelectorAll(':scope input[name=\"fcmp[]\"]:checked').length;\n\n    if (count == 0) {\n        counter.classList.add('badge-danger');\n        fcmp.classList.add('is-invalid');\n        invalidfeedback.classList.remove('hidden');\n    } else {\n        counter.classList.remove('badge-danger');\n        fcmp.classList.remove('is-invalid');\n        invalidfeedback.classList.add('hidden');\n    }\n\n    counter.textContent = count;\n};\n\n/**\n * @function handleLanguageSearch\n * @param {Element} inputField\n */\nconst handleLanguageSearch = (inputField) => {\n    let needle = inputField.value.toString().replace(/^ +| +$/, '').toLowerCase();\n\n    globalLanguageSelectorOptionsCache.forEach(item => {\n        if (needle == '' || item.text.toString().toLowerCase().indexOf(needle) !== -1) {\n            item.classList.remove('hidden');\n            // It is not enough to hide the options, because block-select (via select) would select hidden intermediate options too.\n            // So we need to disable them.\n            item.removeAttribute('disabled');\n        } else {\n            item.classList.add('hidden');\n            item.setAttribute('disabled', 'disabled');\n        }\n    });\n};\n\n/**\n * @function updateCounterOfSelectedLanguages\n */\nconst updateCounterOfSelectedLanguages = () => {\n    let flng = document.getElementById('amosfilter_flng');\n    let counter = document.getElementById('amosfilter_flng_counter');\n    let invalidfeedback = document.getElementById('amosfilter_flng_invalid_feedback');\n    let count = flng.querySelectorAll(':scope option:checked').length;\n\n    if (count == 0) {\n        counter.classList.add('badge-danger');\n        flng.classList.add('is-invalid');\n        invalidfeedback.classList.remove('hidden');\n    } else {\n        counter.classList.remove('badge-danger');\n        flng.classList.remove('is-invalid');\n        invalidfeedback.classList.add('hidden');\n    }\n\n    counter.textContent = count;\n};\n\n/**\n * @function toggleMoreOptions\n * @param {Event} e\n * @param {Element} root\n */\nconst toggleMoreOptions = async(e, root) => {\n    e.preventDefault();\n\n    if (root.getAttribute('data-level-showadvanced') == '0') {\n        root.setAttribute('data-level-showadvanced', 1);\n        e.target.innerText = await getString('lessfilteringoptions', 'local_amos');\n\n    } else {\n        root.setAttribute('data-level-showadvanced', 0);\n        e.target.innerText = await getString('morefilteringoptions', 'local_amos');\n        showUsedAdvancedOptions();\n    }\n};\n\n/**\n * Make advanced options that have been set, visible even in basic mode.\n *\n * @function showUsedAdvancedOptions\n */\nconst showUsedAdvancedOptions = () => {\n    let root = document.getElementById('amosfilter');\n\n    root.querySelectorAll(':scope [data-level=\"advanced\"][data-level-control]').forEach(item => {\n        let control = document.getElementById(item.getAttribute('data-level-control'));\n        let forceshow = false;\n\n        if (control.tagName.toLowerCase() == 'input'\n                && control.getAttribute('type') == 'checkbox'\n                && control.checked) {\n            forceshow = true;\n        }\n\n        if (control.tagName.toLowerCase() == 'input'\n                && control.getAttribute('type') == 'text'\n                && control.value !== '') {\n            forceshow = true;\n        }\n\n        if (control.tagName.toLowerCase() == 'select'\n                && control.hasAttribute('data-default')\n                && !control.hasAttribute('disabled')) {\n            let selected = control.querySelectorAll(':scope option:checked');\n\n            if (selected.length != 1) {\n                forceshow = true;\n\n            } else {\n                selected.forEach(option => {\n                    if (option.value !== control.getAttribute('data-default')) {\n                        forceshow = true;\n                    }\n                });\n            }\n        }\n\n        if (forceshow) {\n            item.setAttribute('data-level-forceshow', 1);\n        } else {\n            item.removeAttribute('data-level-forceshow');\n        }\n    });\n\n    root.querySelectorAll(':scope [data-level=\"advanced\"][data-level-control]').forEach(item => {\n        let control = document.getElementById(item.getAttribute('data-level-control'));\n\n        if (control.tagName.toLowerCase() == 'fieldset') {\n            if (control.querySelector('[data-level-forceshow]')) {\n                item.setAttribute('data-level-forceshow', 1);\n            } else {\n                item.removeAttribute('data-level-forceshow');\n            }\n        }\n    });\n};\n\n/**\n * @function scrollToFirstSelectedComponent\n */\nconst scrollToFirstSelectedComponent = () => {\n    let comp = document.getElementById('amosfilter_fcmp').querySelector('input[id^=\"amosfilter_fcmp_f_\"]:checked');\n\n    if (comp) {\n        comp.scrollIntoView(false);\n    }\n};\n\n/**\n * @function submitFilter\n */\nconst submitFilter = () => {\n    let root = document.getElementById('amosfilter');\n    let flng = document.getElementById('amosfilter_flng');\n    let loadingIndicator = document.getElementById('amosfilter_loading_indicator');\n    let languageSearch = document.getElementById('amosfilter_flng_search');\n\n    loadingIndicator.classList.remove('hidden');\n\n    // Temporarily enable all language selector options to make sure that selected ones are submitted.\n    flng.querySelectorAll(':scope option').forEach(item => {\n        item.removeAttribute('disabled');\n    });\n\n    let form = root.querySelector('form');\n    let formdata = new FormData(form);\n\n    // Put the language selector into original state again (disable all hidden options).\n    handleLanguageSearch(languageSearch);\n\n    formdata.delete('sesskey');\n    PubSub.publish(FilterEvents.submit, new URLSearchParams(formdata).toString());\n};\n"],"file":"filter.min.js"}